<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
        <title>SGTC LIMS<%= controller.action_name %></title>
        <%= stylesheet_link_tag 'lims_std' %>
        <%= javascript_include_tag :defaults, :cache => true %>
		<%= calendar_date_select_includes %>
    </head>

<body id='body'>
	
<div id="header">
	<img src="/images/sutech_reflect_DB.gif" alt="Stanford Genome Technology" width="99" height="80" title="SGTC Sequencing Database" />
	
	<h1>SGTC LIMS <% if RAILS_ENV != 'production'%> - (<%= RAILS_ENV%>)<%end%></h1>
	
	<p><% if APP_VERSION %>Version: <%= APP_VERSION %><% end %></p>
</div>

<div id="container">
	<div id="leftsidebar">
    <ul class="user_info">
	  <% if logged_in? %> <li><i> Logged in as: <%= current_user.login %> </i></li> <% end %>
	</ul>
	<ul class="opened">
	<% if logged_in? %> 
	<% if can? :new, SampleCharacteristic %>
	<li> <%= link_to_function "Clinical Samples", toggle_div(:clinical_menu) %></li>
	  <div id="clinical_menu", style="display:none;">
      	 <ul>
	     <li><%= link_to 'New Clinical Sample', new_sample_characteristic_path %></li>
		 <li><%= link_to 'Add/Upd Pathology Report', new_path_rpt_path %></li>
		 <% if can? :read, Patient %>
		 <li><%= link_to 'Upd Patient', modify_patient_path %></li>
		 <% end %>
		 <li><%= link_to 'Upd Sample Characteristics', modify_sample_path %></li>
		 <li><%= link_to 'Upd Sample', upd_sample_path %></li>
		 </ul>
      </div>
	<% end %>
	<% end %>
	
	<% if logged_in? %>
	<% if can? :new, ProcessedSample %>
	<li> <%= link_to_function "H&E/Dissection/Extraction", toggle_div(:processing_menu) %> </li>
	  <div id="processing_menu", style="display:none;">
      	 <ul>
		 <li><%= link_to 'New Processing', new_psample_path %></li>
		 <li><%= link_to 'Upd Sample', upd_sample_path %></li>
		 </ul>
      </div>
	<% end %>
	<% end %>
	
	<% if logged_in? %>
	<% if can? :new, SeqLib %>
	<li> <%= link_to_function "Library Prep", toggle_div(:assay_menu)%> </li>
	  <div id="assay_menu", style="display:none;">
      	 <ul>
		 <li><%= link_to 'New Lib-Singleplex', new_lib_S_path  %></li>
		 <li><%= link_to 'New Lib-Multiplex',  new_lib_M_path  %></li>
		 <li><%= link_to 'List Seq Libraries', seq_libs_path %></li>
		 </ul>
      </div>
	<% end %>
	<% end %>
	
	<% if logged_in? %>
	<% if can? :new, FlowCell %>
	<li> <%= link_to_function "Sequencing", toggle_div(:analysis_menu)%> </li>
	  <div id="analysis_menu", style="display:none;">
      	 <ul>
		 <li><%= link_to 'Prepare FlowCell',  flow_cell_setup_path %></li>
		 <li><%= link_to 'FlowCells for Seq', flow_cells_path(:rpt_type => 'seq') %></li>
		 <li><%= link_to 'List Seq Runs',     flow_cells_path(:rpt_type => 'list') %></li>
		 <li><%= link_to 'List Sequencers',   seq_machines_path %></li>
		 </ul>
      </div>
	<% end %>
	<% end %>
	
	<% if logged_in? %>
	<% if can? :new, RunDir %>
	<li> <%= link_to_function "Run Directories", toggle_div(:rundir_menu)%> </li>
	  <div id="rundir_menu", style="display:none;">
      	 <ul>
		 <li><%= link_to 'List Run Directories', run_dirs_path %></li>
		 <li><%= link_to 'Edit Run Directories', dir_params_path %></li>
		 <li><%= link_to 'List Storage Devices', storage_devices_path %></li>
		 </ul>
      </div>
	<% end %>
	<% end %>
	
	<% if logged_in? %>
	<li> <%= link_to "Attachments", attach_params_path %> </li>
	<% end %>	
	
	<% if logged_in? %>
	<li> <%= link_to_function "Query", toggle_div(:query_menu)%> </li>
	  <div id="query_menu", style="display:none;">
      	 <ul>
      	 <li><%= link_to 'Source/Dissections', unprocessed_query_path %></li>
	     <li><%= link_to 'Extracted Samples',  processed_query_path %></li>
		 <li><%= link_to 'Seq Libraries',      lib_query_path  %></li>
		 <li><%= link_to 'Sequencing Runs',    seq_run_query_path %></li>
		 </ul>
      </div>
	<% end %>

	<% if logged_in? %>
	<li> <%= link_to_function "System Tables", toggle_div(:systables_menu)%> </li>
	  <div id="systables_menu", style="display:none;">
      	 <ul>
      	 <li><%= link_to 'User Info', edit_user_path(current_user) %></li>
		 <li><%= link_to 'Protocols', protocol_type_path %></li>
		 <li><%= link_to 'Drop-Down Lists', categories_path %></li>
         <li><%= link_to 'Storage Locations', storage_locations_path %></li>
		 <li><%= link_to 'Multiplex Tags', index_tags_path %></li>
		 <li><%= link_to 'Alignment Refs', alignment_refs_path %></li>
		 </ul>
      </div>
	<% end %>
	
	<% if logged_in? %>
	<% if current_user.has_role?("admin")%>
	<li> <%= link_to_function "Admin", toggle_div(:admin_menu)%> </li>
	  <div id="admin_menu", style="display:none;">
      	 <ul>
      	 <li><%= link_to 'Users', users_path %>
		 <li><%= link_to 'Researchers', researchers_path %></li>
		 </ul>
      </div>
	<% end %>
	<% end %>
	
	<% if logged_in? %>
	<li>&nbsp;</li>
	<li> <%= link_to_function "Orders", toggle_div(:order_menu)%> </li>
	  <div id="order_menu", style="display:none;">
      	 <ul>
      	 <li><%= link_to 'New item', new_item_path %></li>
	     <li><%= link_to 'View/Order items', view_items_path %></li>
	     <li><%= link_to 'List/Upd orders', view_orders_path %></li>
		 </ul>
	  </div>
	<% end %>
	
	<% if logged_in? %>
	<li>&nbsp;</li>
	<li><%= link_to 'Logout', logout_url %></li>
	</ul>
	<% end %>
	</div>

	<div id="maincontent">
	<div style='color:red'> <%= flash[:error]%></div>
    <div style='color:green'> <%= flash[:notice]%></div>
	<%= yield %>
	</div>
	
</div> 

<div id="footer">
	<p class="lft"><a href="http://med.stanford.edu/sgtc/">Stanford Genome Technology Center</a> | <a href="mailto:insert_contact_name@stanford.edu">Contact</a> |</p>

</div>

</body>
</html>