<% last_info_box ||= 'no' %>
<% source ||= '' %>
<% click_to_link ||= 'none' %>
<% link_to_edit ||= 'yes' %>

<% click_to_link = 'none' if (click_to_link == 'edit' && (cannot? :edit, sample))%>
<% click_to_link = 'none' if (click_to_link == 'show' && (cannot? :read, sample))%>

<!-- Standard fields to be displayed -->
<% info_flds   = [[(click_to_link == 'none'? 'Field' : 'Link'), 'Barcode', sample.barcode_key, click_to_link], 
                  ['Field', 'Collected/Created On', sample.sample_date],
                  ['Field', 'Sample Type', [sample.sample_tissue, sample.sample_type].join('/')],
                  ['Field', 'OR Designation', sample.tumor_normal],
                  ['Field', 'Pathology DX', (sample.sample_characteristic.pathology ? sample.sample_characteristic.pathology.pathology_classification : nil)], 
                  ['Field', 'Histopathology', (sample.histology ? sample.histology.histopathology : nil)],
                  ['Field', 'Container Type', sample.container_type],
				  ['Field', 'Amount', sample.sample_amt],
                  ['Field', 'Remaining?', sample.sample_remaining],
                  ['Field', 'Storage Location', (sample.storage_location ? sample.storage_location.location_string : nil)],
                  ['Field', 'Shelf', sample.storage_shelf],
                  ['Field', 'Box/Bin#', sample.storage_boxbin]] %>
				  
<!-- Only include comments if non-blank -->
<% info_flds.push(['Field', 'Comments', sample.comments]) if !sample.comments.blank? %>

<!-- Links to be displayed with borders, in bottom row of info box -->
<% info_links = [] %>
<% info_links = [['Edit', 'edit']] if link_to_edit == 'yes' && (can? :edit, sample) %>

<%= render :partial => 'shared/info_box', :locals => {:info_legend     => [source, 'Sample Details'].join(' '),
                                                      :info_flds       => info_flds,
                                                      :info_links      => info_links,
                                                      :link_controller => 'samples',
                                                      :link_id         => sample.id,
                                                      :last_info_box   => last_info_box} %>
